<!doctype html>
<!-- (c) Copyright protected by Duke University -->
<html class="no-js" lang="en-US" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <title>California Stream Gages</title>
    <meta name="description" content="California Stream Gages">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="shortcut icon" href="favicon.png">

    <link rel="manifest" href="site.webmanifest">
    <link rel="apple-touch-icon" href="icon.png">
    <!-- Place favicon.ico in the root directory -->

    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link href="https://fonts.googleapis.com/css2?family=Lato&family=Quicksand:wght@400;600&display=swap" rel=  "stylesheet">
     
    <script  src="https://code.jquery.com/jquery-3.5.0.min.js"  integrity="sha256-xNzN2a4ltkB44Mc/Jz3pT4iU1cmeR0FkXs4pru/JxaQ="
    crossorigin="anonymous"></script>
    
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap-theme.min.css" integrity="sha384-rHyoN1iRsVXV4nD0JutlnGaslCJuC7uwjduW9SVrLvRYooPp2bWYgmgJQIXwl/Sp" crossorigin="anonymous">
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>

    
    <script src="https://api.mapbox.com/mapbox-gl-js/v2.0.0/mapbox-gl.js"></script>
    <link href="https://api.mapbox.com/mapbox-gl-js/v2.0.0/mapbox-gl.css" rel="stylesheet" />
    <script src="https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-geocoder/v4.5.1/mapbox-gl-geocoder.min.js"></script>
    <link rel="stylesheet" href="https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-geocoder/v4.5.1/mapbox-gl-geocoder.css"
        type="text/css"/>

    <!-- Promise polyfill script required to use Mapbox GL Geocoder in IE 11 -->
    <script src="https://cdn.jsdelivr.net/npm/es6-promise@4/dist/es6-promise.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/es6-promise@4/dist/es6-promise.auto.min.js"></script>
    
    <script src="https://d3js.org/d3.v5.min.js"></script>           
    <script type="text/javascript" src="https://cdn.plot.ly/plotly-latest.min.js" defer></script>
    <link rel="stylesheet" href="css/main_content.css">

    <style type="text/css">
    
    </style>
</head>

<body>
<div class = "row header">
    <div class="col-sm-9">    
        <h1 style="padding-left: 1em;">California Stream Gap Analysis</h1>    
        <hr style="background-color: #02145C; height: 5px; margin-top: 1px;">
    </div>
    <div class="col-sm-3">
        <a href = "https://internetofwater.org/"> <img src="img/iow_logo.png" style="width: 200px; height: 78px; padding-top: 10px; display: inline-block;"> </a> 
    </div>
</div>

<!-- EXPLANATION TAB #################################################################################################

####################################################################################################################-->
<div class = "row header" style="margin-left: 20px;">
  <p style="font-size: 16px;">This dashboard provides results from the gage gap analysis...
    </p>
</div>


<!--#######################################################################################################
                                    TAB SET UP
    ######################################################################################################-->
<div class="container">
  <div class="col-sm-6" style="padding:0px">
      <div class= "map-layers-row">   
        <h3 class="chartTitles">Turn Map Layers On and Off</h3> 
        <div class="row" style="text-align: center; display: inline;"> 
            <button class = "btn" value = "menuHUC12" id = "menuHUC12" style= "background-color: #3f97a8; color: white;">HUC12</button>
            <button class="btn" value="menuBasins" id="menuBasins">River Basin</button>
            <button class="btn" value="menuWatershed" id="menuWatershed">Sub-Basin</button>
            <button class="btn" value= "menuRivers" id= "menuRivers">Rivers</button>
            <button class="btn" value= "menuLakes" id= "menuLakes">Water Bodies</button>
            <button class="btn" value= "menuStreamGages" id= "menuStreamGages" style= "background-color: #3f97a8; color: white;">Stream Gages</button>
            <button class="btn" value= "menuCounty" id= "menuCounty">County</button>
            <button class="btn" value= "menuUrban" id= "menuUrban">Urban Areas</button>
        </div><!--end top row-->
     
    </div><!-- end map layers row-->

    <!--#######################################################################################################
                                    MAP DIV
    ######################################################################################################-->
     <div class="map-layer-row" id = "map-column" style="z-index: 1px;" style="border: thin solid rgb(26,131,130);">
           <div id="map" style="height: 700px; z-index: 10;"> <!--border: thin solid black;"--> 
           <div class="infoMap" id="map_hover_box"><p><strong>Hover over huc12</strong></p></div>
           <div class="legend" id="stream-legend" style="display: none;"></div>    
           <div class="legend" id="huc12-legend" style="display: none;"></div>    
         </div> <!--end map Div-->
      </div><!--end map row div-->
  </div> <!--co-sm-5 end Map section-->

     


<!--#######################################################################################################
                                      FILTER CONTENT / RESULTS CONTENT
  ######################################################################################################-->
<div class = "col-sm-6">
   <div class="row row-margin" style="margin-left: 8px;">
      <h3 style="color:rgb(26,131,130)">Select what stream gages are shown</h3>
      <br>
      <form name="gage_status"> <span style="font-weight:bold; font-size: 18px;"> Show gages with a status of:</span> &emsp;
        <select style="width: 200px;" name="setStatus" id="setStatus" onchange="setStatusThis(this);">
        <option selected="selected" value="All"> All Gages</option>
        <option value="Active"> Active Gages</option>
        <option value="Inactive"> Inactive Gages </option>
      </select>
    </form>
      <br>

      <form name="gage_status"> <span style="font-weight:bold; font-size: 18px;"> Show gages by stream size:</span> &emsp;
        <select style="width: 200px;" name="setGageOrder" id="setGageOrder" onchange="setGageOrderThis(this);">
          <option selected="selected" value="All"> All Stream Sizes</option>
          <option value="headwaterGage"> Headwaters (1 to 3)</option>
          <option value="streamGage"> Streams (4 to 6) </option>
          <option value="riverGage"> Rivers (7 to 9) </option>
        </select>
      </form>
      <br>

      <form name="selectOwner"><span style="font-weight:bold; font-size: 18px;">Show gages owned by: </span> &emsp;
          <select style="width: 220px;" name="setOwner" id="setOwner" onchange="setOwnerThis(this);">
          <option selected="selected" value="All"> All Owners</option>
          <option value="California"> California Agencies</option>
          <option value="City or County"> Cities or Counties </option>
          <option value="Conservation Districts"> Conservation Districts </option>
          <option value="Energy Utilities"> Energy Utilities </option>
          <option value="USGS"> Federal - USGS </option>
          <option value="Federal (non-USGS)"> Federal - Non-USGS </option>
          <option value="Irrigation Districts"> Irrigation Districts </option>
          <option value="Water Utilities"> Water Utilities </option>
          <option value="Other"> Other / Unknown </option>
        </select>
      </form>
      <br>

      <p><span style="font-weight:bold; font-size: 18px;">Show gages measuring</span> (must measure each of the checked boxes to display):</p>
      <section style="padding-left: 10px;">
        <input type="checkbox" class="check_row" name="setGageMeasure" checked="checked" value="All"> All Types &emsp;
        <input type="checkbox" class="check_row" name="setGageMeasure" value="stage_yn"> Stage &emsp;
        <input type="checkbox" class="check_row" name="setGageMeasure" value="flow_yn"> Flow &emsp;
        <input type="checkbox" class="check_row" name="setGageMeasure" value="watqual_yn"> Water Quality &emsp;
        <input type="checkbox" class="check_row" name="setGageMeasure" value="temp_yn"> Temperature &emsp;
      </section>
      
      <p><span style="font-weight:bold; font-size: 18px;">Show gages used to manage</span> (must measure each of the checked boxes to display):</p>
      <section style="padding-left: 10px;">
        <input type="checkbox" class="check_row" name="setGageManage" checked="checked" value="All"> All Uses &emsp; &emsp;
        <input type="checkbox" class="check_row" name="setGageManage" value="floodmgmt"> Flood &emsp;
        <input type="checkbox" class="check_row" name="setGageManage" value="firo"> Flood Informed Reservoir Operations <br>
        <input type="checkbox" class="check_row" name="setGageManage" value="ecosysmgmt"> Ecosystem &emsp;
        <input type="checkbox" class="check_row" name="setGageManage" value="grdwtrmgmt"> Groundwater <br>
        <input type="checkbox" class="check_row" name="setGageManage" value="pubsafety"> Public Safety &nbsp;
        <input type="checkbox" class="check_row" name="setGageManage" value="wtrsupply"> Water Supply &emsp;
      </section>
      <br>

      <hr style="margin: 5px 0; width: 3px; background-color: rgb(26,131,130)">
      <section style="margin: 0; padding: 25px; font-size: 20px; color: rgb(26,131,130); background-color: rgba(224,224,224,0.6); font-weight: bold;">
        <h3 id="gageCount">There are 2,681 gages selected.</h3>
      </section>
      <hr style="margin: 5px 0; width: 3px; background-color: rgb(26,131,130)">

      <h3 style="color:rgb(26,131,130)">Select a legend for HUC 12 watersheds:</h3>
      <form name="gage_status"> <span style="font-weight:bold; font-size: 18px;"> Pick HUC Legend:</span> &emsp;
        <select style="width: 250px;" name="setHUCLegend" id="setHUCLegend" onchange="setHUCLegendThis(this);">
          <option selected="selected" value="none"> None</option>
          <option value="conservationStatus"> Conservation Status</option>
          <option value="firoStatus"> Forecast Informed Reservoirs Operating </option>
          <option value="condIndex"> Conditional? Index </option>
          <option value="threatIndex"> Threat Index </option>
          <option value="bioRankAll"> Biodiversity Rank </option>
          <option value="gageStatusHead"> Percent of Poorly Gaged Headwaters </option>
          <option value="gageStatusStream"> Percent of Poorly Gaged Streams </option>
          <option value="gageStatusRiver"> Percent of Poorly Gaged Rivers </option>
        </select>
      </form>

    </div>

       
<div class="row" id="main-one" style="padding: 0 10px;">
   </div><!--End Div row main-one-->
</div><!--end div col-sm-7-->

</div><!--end main row-->

<script type="application/javascript">
  //###########################################################################
  //                        SET UP GLOBAL VARIABLES
  //##############################################################################################
 var zoomThreshold = 4
 var streamLegend = document.getElementById('stream-legend');
 var hucLegend = document.getElementById('huc12-legend');

 var gageActive = "All";
 var owner = "All";
 var gageMeasure = ["All"];
 var gageManage = ["All"];
 var gageOrder = "All";
 var hucLegendDrawn = "none";

 // Create a popup, but don't add it to the map yet.
 var popup = new mapboxgl.Popup({
    closeButton: false,
    closeOnClick: false
  });
 


  /* SET UP THE MAP */
  mapboxgl.accessToken = 'pk.eyJ1IjoiaW50ZXJuZXRvZndhdGVyIiwiYSI6ImNrdHZuZXRrazJjMnMycHAzdW91bnAyNjgifQ.KeB-tlVDJgW7H_NGdCghNg';
  var map = new mapboxgl.Map({
    container: 'map', //specify container ID
    style: 'mapbox://styles/mapbox/light-v10', //streets-v11', //specify map style
    center: [-119.4, 37.2], //specify the start position; long, lat
    zoom: 5
  });
  map.addControl(new mapboxgl.NavigationControl(), 'top-left');

  
</script>

<script type="application/javascript" src="scripts/drawMap.js"></script>
<script type="application/javascript" src="scripts/map_hover_click.js"></script>
<script type="application/javascript" src="scripts/gage_layers.js"></script>
<script type="application/javascript" src="scripts/hucLegend.js"></script>
</body>
    
</html>



