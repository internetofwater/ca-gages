<!doctype html>
<!-- (c) Copyright protected by Duke University -->
<html class="no-js" lang="en-US" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <title>California Stream Gages</title>
    <meta name="description" content="North Carolina water supply status">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="shortcut icon" href="favicon.png">

    <link rel="manifest" href="site.webmanifest">
    <link rel="apple-touch-icon" href="icon.png">
    <!-- Place favicon.ico in the root directory -->

    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link href="https://fonts.googleapis.com/css2?family=Lato&family=Quicksand:wght@400;600&display=swap" rel=  "stylesheet">
     
    <script  src="https://code.jquery.com/jquery-3.5.0.min.js"  integrity="sha256-xNzN2a4ltkB44Mc/Jz3pT4iU1cmeR0FkXs4pru/JxaQ="
    crossorigin="anonymous"></script>
    
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap-theme.min.css" integrity="sha384-rHyoN1iRsVXV4nD0JutlnGaslCJuC7uwjduW9SVrLvRYooPp2bWYgmgJQIXwl/Sp" crossorigin="anonymous">
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>

    
    <script src="https://api.mapbox.com/mapbox-gl-js/v2.0.0/mapbox-gl.js"></script>
    <link href="https://api.mapbox.com/mapbox-gl-js/v2.0.0/mapbox-gl.css" rel="stylesheet" />
    <script src="https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-geocoder/v4.5.1/mapbox-gl-geocoder.min.js"></script>
    <link rel="stylesheet" href="https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-geocoder/v4.5.1/mapbox-gl-geocoder.css"
        type="text/css"/>

    <!-- Promise polyfill script required to use Mapbox GL Geocoder in IE 11 -->
    <script src="https://cdn.jsdelivr.net/npm/es6-promise@4/dist/es6-promise.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/es6-promise@4/dist/es6-promise.auto.min.js"></script>
    
    <script src="https://d3js.org/d3.v5.min.js"></script>           
    <script type="text/javascript" src="https://cdn.plot.ly/plotly-latest.min.js" defer></script>
    <link rel="stylesheet" href="css/main_content.css">

    <style type="text/css">
    
    </style>
</head>

<body>
<div class = "row header">
    <div class="col-sm-9">    
        <h1 style="padding-left: 1em;">California Stream Gap Analysis</h1>    
        <hr style="background-color: #02145C; height: 5px; margin-top: 1px;">
    </div>
    <div class="col-sm-3">
        <a href = "https://internetofwater.org/"> <img src="img/iow_logo.png" style="width: 200px; height: 78px; padding-top: 10px; display: inline-block;"> </a> 
    </div>
</div>

<!-- EXPLANATION TAB #################################################################################################

####################################################################################################################-->
<div class = "row header" style="margin-left: 20px;">
  <p style="font-size: 16px;">This dashboard provides results from the gage gap analysis...
    </p>
</div>


<!--#######################################################################################################
                                    TAB SET UP
    ######################################################################################################-->
<div class="container">
  <div class="col-sm-6" style="padding:0px">
      <div class= "map-layers-row">   
        <h3 class="chartTitles">Turn Map Layers On and Off</h3> 
        <div class="row" style="text-align: center; display: inline;"> 
            <button class = "btn" value = "menuHUC12" id = "menuHUC12" style= "background-color: #3f97a8; color: white;">HUC12</button>
            <button class="btn" value="menuBasins" id="menuBasins">River Basin</button>
            <button class="btn" value="menuWatershed" id="menuWatershed">Sub-Basin</button>
            <button class="btn" value= "menuRivers" id= "menuRivers">Rivers</button>
            <button class="btn" value= "menuLakes" id= "menuLakes">Water Bodies</button>
            <button class="btn" value= "menuStreamGages" id= "menuStreamGages" style= "background-color: #3f97a8; color: white;">Stream Gages</button>
            <button class="btn" value= "menuCounty" id= "menuCounty">County</button>
            <button class="btn" value= "menuUrban" id= "menuUrban">Urban Areas</button>
        </div><!--end top row-->
     
    </div><!-- end map layers row-->

    <!--#######################################################################################################
                                    MAP DIV
    ######################################################################################################-->
     <div class="map-layer-row" id = "map-column" style="z-index: 1px;" style="border: thin solid rgb(26,131,130);">
           <div id="map" style="height: 700px; z-index: 10;"> <!--border: thin solid black;"--> 
           <div class="infoMap" id="map_hover_box"><p><strong>Hover over huc12</strong></p></div>
           <div class="legend" id="stream-legend" style="display: none;"></div>    
           <div class="legend" id="huc12-legend" style="display: none;"></div>    
         </div> <!--end map Div-->
      </div><!--end map row div-->
  </div> <!--co-sm-5 end Map section-->

     


<!--#######################################################################################################
                                      FILTER CONTENT / RESULTS CONTENT
  ######################################################################################################-->
<div class = "col-sm-6">
   <div class="row row-margin" style="margin-left: 8px;">
      <h3 style="color:rgb(26,131,130)">Select what stream gages are shown</h3>
      <p style="font-size: 18px;">Show gages with a status of:</p>
      <section style="padding-left: 10px;">
        <input type="checkbox" class="check_row" name="gage_status" checked="checked" value="Active"> Active Gages &emsp;
        <input type="checkbox" class="check_row" name="gage_status" value="Inactive"> Inactive Gages &emsp;
        <input type="checkbox" class="check_row" name="gage_status" value="All"> All Gages
      </section>

      <p style="font-size: 18px;">Show gages owned by:</p>
      <section style="padding-left: 10px;">
        <input type="checkbox" class="check_row" name="owner_type" checked="checked" value="All"> All Owners &emsp; &emsp; &emsp; &emsp; &emsp;
        <input type="checkbox" class="check_row" name="owner_type" value="California"> California Agencies &emsp;
        <input type="checkbox" class="check_row" name="owner_type" value="City or County"> Cities or Counties <br>
        <input type="checkbox" class="check_row" name="owner_type" value="Conservation Districts"> Conservation Districts &emsp;
        <input type="checkbox" class="check_row" name="owner_type" value="Irrigation Districts"> Irrigation Districts &emsp;
        <input type="checkbox" class="check_row" name="owner_type" value="Energy Utilities"> Energy Utilities <br>
        <input type="checkbox" class="check_row" name="owner_type" value="Water Utilities"> Water Utilities &emsp; &emsp; &emsp; &emsp;
        <input type="checkbox" class="check_row" name="owner_type" value="USGS"> Federal - USGS &emsp; &emsp;
        <input type="checkbox" class="check_row" name="owner_type" value="Federal (non-USGS)"> Federal - not USGS <br>
      </section>



      <script type = "application/javascript">
      // the selector will match all input controls of type :checkbox and attach a click event handler 
      var test;
        $("input:checkbox").on('click', function() {
          // in the handler, 'this' refers to the box clicked on
          var $box = $(this);
          var box_name = $box.attr("name")

          if(box_name === "gage_status"){
            if ($box.is(":checked")) {
              // the name of the box is retrieved using the .attr() method
              var group = "input:checkbox[name='" + $box.attr("name") + "']";
            // the checked state of the group/box on the other hand will change and the current value is retrieved using .prop() method
                $(group).prop("checked", false);
                $box.prop("checked", true);
            } else {
              $box.prop("checked", false);
            }


            //call onclick function
            if(box_name === "gage_status"){
              test = $box.prop("checked", true)
              gageActive = test[0].value;
              drawGages(gageActive);
              return gageActive;
            }
          }//end if a checkbox that only allows one choice
       });
      </script>

      <ul>
        <li>checkbox of what is measured (ANDs): stage, flow, water quality or temperature</li>
        <li>checkbox of purpose (ANDs): flood, ecosystem, groundwater, public safety, or water supply</li>
        <li>checkbox of stream order size (headwaters, stream, rivers) (ORS)</li>
      </ul>
      <br><br>
      <h4>Maybe we can show some basic metadata about gages based on selection above</h4>
      <br><br>
      <h4>Select what huc12 are shown and legend</h4>
      <ul>Dropdown menu... changes legend
        <li>Conservation Status</li>
        <li>Gage Status: (overall, headwaters, streams, rivers)</li>
        <li>Biodiversity Status (overall, headwaters, streams, rivers)</li>
        <li>Biodiversity Status for native species</li>
        <li>Biodiversity Status for rare species</li>
        <li>Biodiversity Status for ...</li>
      </ul>
      <br><br>
      <h4>Maybe we can show some basic metadata about hucs based on selection above</h4>

    </div>
  
<div class="row" id="main-one" style="padding: 0 10px;">
   </div><!--End Div row main-one-->
</div><!--end div col-sm-7-->

</div><!--end main row-->

<script type="application/javascript">
  //###########################################################################
  //                        SET UP GLOBAL VARIABLES
  //##############################################################################################
 var zoomThreshold = 4
 var streamLegend = document.getElementById('stream-legend');

 var gageActive = "Active";
 var owner = "All";

 // Create a popup, but don't add it to the map yet.
 var popup = new mapboxgl.Popup({
    closeButton: false,
    closeOnClick: false
  });
 


  /* SET UP THE MAP */
  mapboxgl.accessToken = 'pk.eyJ1IjoiaW50ZXJuZXRvZndhdGVyIiwiYSI6ImNrdHZuZXRrazJjMnMycHAzdW91bnAyNjgifQ.KeB-tlVDJgW7H_NGdCghNg';
  var map = new mapboxgl.Map({
    container: 'map', //specify container ID
    style: 'mapbox://styles/mapbox/light-v10', //streets-v11', //specify map style
    center: [-119.4, 37.2], //specify the start position; long, lat
    zoom: 5
  });
  map.addControl(new mapboxgl.NavigationControl(), 'top-left');

  
</script>

<script type="application/javascript" src="scripts/drawMap.js"></script>
<script type="application/javascript" src="scripts/map_hover_click.js"></script>
<script type="application/javascript" src="scripts/gage_layers.js"></script>
</body>
    
</html>



